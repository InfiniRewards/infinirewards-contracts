# InfiniRewards Smart Contracts

A comprehensive rewards system built on StarkNet that enables merchants to create and manage loyalty programs using points and collectibles.

## Overview

InfiniRewards is a modular smart contract system that allows:
- Merchants to create and manage their own loyalty points
- Users to earn and spend points across different merchants
- Creation and management of collectible NFTs (ERC-1155)
- Issuance of non-transferable certificate tokens (SBT)
- Secure account abstraction for both users and merchants

## Contract Architecture

The system consists of several core contracts:

### InfiniRewardsFactory
- Central factory contract for deploying and managing the ecosystem
- Creates user accounts, merchant accounts, points contracts, collectible contracts, and certificate contracts
- Maintains registry of all deployed contracts

### InfiniRewardsPoints
- ERC-20 compatible points token
- Customizable name, symbol, and decimals
- Pausable and upgradeable functionality
- Owned and managed by merchant accounts

### InfiniRewardsCollectible
- ERC-1155 compatible NFT contract
- Supports multiple collectible types per merchant
- Configurable pricing in merchant's points
- Metadata and supply management

### InfiniRewardsCertificate
- ERC-1155 compatible certificate token
- Non-transferable (SBT-style)
- Expiry and metadata management

### Account Contracts
- Separate account implementations for users and merchants
- Built on OpenZeppelin account abstractions
- Secure transaction validation and execution

## Development

### Prerequisites
- [Scarb](https://docs.swmansion.com/scarb)
- Node.js & npm/yarn
- StarkNet Devnet (for local development)

### Setup
1. Clone the repository
2. Install dependencies:
```bash
npm install
cd contracts && scarb build
```

### Testing
Run the test suite:
```bash
npm run test
```

### Local Deployment
1. Start local devnet:
```bash
npm run chain
```

2. Deploy contracts:
```bash
npm run deploy
```

For a fresh deployment:
```bash
npm run deploy:reset
```

Upgrade:
```
yarn upgrade:contract --network sepolia --address 0x06c0b75d53c757cc1979d3aaa9482ac449ae0dfd1e5a9807b24478cf4da2d5f8 --declare --update-components
```

Deploy Certificate
```
yarn deploy:certificate --network mainnet --name "badges" --metadata "infinirewards badges" --owner 0x05b72F25e5824c980012321089D26529289244D776404f3157bbE5aADa24e6A5
```

## Contract Addresses

The deployed contract addresses can be found in `outputs/contracts/deployedContracts.ts`. This file is automatically generated during deployment.




## Template Contracts

Example industry templates are provided in the `templates/` directory. These
contracts offer simple starting points for common verticals such as caf√©s, gyms
and e-commerce sites. Merchants can use them as-is or extend them to fit their
needs.
